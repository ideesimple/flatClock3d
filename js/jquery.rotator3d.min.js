/* =============================================================
	// Mutli-screen flat 3D analogue clock (V2.6) with jQuery & CSS3 - No image, no webGL
	// By molokoloco@gmail.com 10/10/2011 - Edit 3D 28/05/2013
	// Demo : http://molokoloco.github.io/flatClock3d/
	// Infos : http://www.b2bweb.fr/coding-project/mutli-screen-flat-3d-analogue-clock-with-jquery-and-css3-v2-3/
	// jsFiddle 2D : http://jsfiddle.net/molokoloco/V2rFN/
	// jsFiddle + 3D : http://jsfiddle.net/molokoloco/x6yc3/
   =============================================================
 * // Usage example...

    var cssPhone = new rotator3d($('#rotator'), {
        reflet: $('#reflet'),
        refletBack: $('#refletBack'),
        rotationX: 6,
        rotationY: -18
    });

* ============================================================== */


!function(b){var d=function(a,e){this.settings=b.extend(!0,{},b.fn.rotator3d.defaults,"object"==typeof e&&e||{});this.element=a;this.reflet=this.settings.reflet;this.refletBack=this.settings.refletBack;this.newRotationX=this.settings.rotationX;this.newRotationY=this.settings.rotationY;this.currentRotationY=this.currentRotationX=0;var c=this;window.isMobile&&window.addEventListener("deviceorientation",function(a){if(c.settings.moveMouseEnabled&&c.settings.is3D){var b=a.beta;a=a.gamma;c.newRotationY=
window.isMozMobile?a:-a;c.newRotationX=window.isMozMobile?-b:b}},!1);var d=function(a){c.settings.moveMouseEnabled&&c.settings.is3D&&(c.newRotationY=0.15*-(a.pageX-0.5*b(window).width()),c.newRotationX=0.5*-(a.pageY-0.5*b(window).height()))};b(document).mouseenter(function(){c.settings.is3D&&(c.settings.moveMouseEnabled=!0,c.update(),document.addEventListener("pointermove",d))}).mouseleave(function(){c.settings.is3D&&(document.removeEventListener("pointermove",d,!1),c.settings.moveMouseEnabled=!1,
c.refresh())}).trigger("mouseenter");this.update()};d.prototype={constructor:d,limitedValue:function(a,b,c){a<=b?(a+=360,a<b&&(a=this.limitedValue(a,b,c))):a>c&&(a-=360,a>c&&(a=this.limitedValue(a,b,c)));return a},update:function(){if(this.settings.moveMouseEnabled&&this.settings.is3D){this.currentRotationX+=0.1*(this.newRotationX-this.currentRotationX);this.currentRotationY+=0.1*(this.newRotationY-this.currentRotationY);if(parseInt(10*this.currentRotationY)!=parseInt(10*this.newRotationY)||parseInt(10*
this.currentRotationX)!=parseInt(10*this.newRotationX))this.element.css({rotateY:this.currentRotationY+"deg",rotateX:this.currentRotationX+"deg"}),this.reflet&&this.reflet.css({backgroundPosition:-5*this.limitedValue(this.currentRotationY,-180,180)+"px 0px"}),this.refletBack&&this.refletBack.css({backgroundPosition:5*(this.limitedValue(this.currentRotationY,0,360)-180)+"px 0px"});requestAnimationFrame(this.update.bind(this))}},toggle3d:function(){this.settings.is3D?(this.settings.is3D=!1,this.settings.moveMouseEnabled=
!1,this.element.css({rotateX:0,rotateY:0})):(this.settings.is3D=!0,this.settings.moveMouseEnabled=!0,this.update())},refresh:function(){this.element.transition({rotateX:this.settings.rotationX,rotateY:this.settings.rotationY},1200);this.reflet&&this.reflet.transition({backgroundPosition:-5*this.limitedValue(this.currentRotationY,-180,180)+"px 0px"},1200);this.refletBack&&this.refletBack.transition({backgroundPosition:5*(this.limitedValue(this.currentRotationY,0,360)-180)+"px 0px"},1200)}};var f=b.fn.rotator3d;
b.fn.rotator3d=function(a){return this.each(function(){var e=b(this),c=e.data("rotator3d");c||e.data("rotator3d",c=new d(e,a));if("string"==typeof a)c[a]()})};b.fn.rotator3d.Constructor=d;b.fn.rotator3d.defaults={reflet:null,refletBack:null,is3D:!0,moveMouseEnabled:!0,rotationX:0,rotationY:0,views:0};b.fn.rotator3d.noConflict=function(){b.fn.rotator3d=f;return this};b(window).on("load",function(){b('[data-rotator3d="true"]').each(function(){var a=b(this);a.rotator3d(a.data())})})}(window.jQuery);