/* =============================================================
	// Mutli-screen flat 3D analogue clock (V2.6) with jQuery & CSS3 - No image, no webGL
	// By molokoloco@gmail.com 10/10/2011 - Edit 3D 28/05/2013
	// Demo : http://molokoloco.github.io/flatClock3d/
	// Infos : http://www.b2bweb.fr/coding-project/mutli-screen-flat-3d-analogue-clock-with-jquery-and-css3-v2-3/
	// jsFiddle 2D : http://jsfiddle.net/molokoloco/V2rFN/
	// jsFiddle + 3D : http://jsfiddle.net/molokoloco/x6yc3/
   =============================================================
	// Usage example...

    $('#clock').analogueClock({ // Create Clock
        withDate:false,
        withDigitalTime:false
    });

* ============================================================== */


!function(f){f.fn.extend({circalise:function(b){b=f.extend({targets:"> *",rotateTargets:!1,rotate3d:!1,startAngle:270,xRadius:null,yRadius:null},b||{});return this.each(function(){var a=f(this),j=parseInt(a.outerWidth(),10),c=parseInt(a.outerHeight(),10),l=a.find(b.targets),m=2*Math.PI/l.length,k=Math.PI*(b.startAngle/180);l.each(function(){var a=f(this),g=(j-parseInt(a.outerWidth(),10))/2,d=(c-parseInt(a.outerHeight(),10))/2,e=b.yRadius||0===b.yRadius?b.yRadius:d,e={left:(b.xRadius||0===b.xRadius?
b.xRadius:g)*Math.cos(k)+g,top:e*Math.sin(k)+d};if(b.rotateTargets||b.rotate3d)g=Math.atan2(e.top-d,e.left-g)+Math.PI/2,/e-/.test(g+"")&&(g=0),g+="rad",e.transform=b.rotate3d?"rotateX(90deg) rotateY("+g+")":"rotate("+g+")";a.transition(e,window.isMobile?0:800);k+=m});return a})},analogueClock:function(b){b=f.extend({withHours:!0,rotateHours:!0,withUnits:!0,withDigitalTime:!1,withDate:!1},b||{});return this.each(function(){var a=f(this),j=a.width(),c=a.height(),j=j/2,l=f('<div class="sec"><div class="clockwise"></div></div>').appendTo(a),
m=f('<div class="min"><div class="clockwise"></div></div>').appendTo(a),k=f('<div class="hour"><div class="clockwise"></div></div>').appendTo(a),p=b.withDigitalTime?f('<div class="time"></div>').appendTo(a):null,g=b.withDate?f('<div class="date"></div>').appendTo(a):null,d=f('<div class="innerCenter"></div>').appendTo(a);l.css({left:j-parseInt(l.width(),10)/2+"px",height:c+"px"});m.css({left:j-parseInt(m.width(),10)/2+"px",height:c+"px"});k.css({left:j-parseInt(k.width(),10)/2+"px",height:c+"px"});
d.css({margin:"-"+parseInt(d.height(),10)/2+"px 0 0 -"+parseInt(d.width(),10)/2+"px"});if(b.withHours){for(var c=12,e="",h=0;h<c;h++)e+='<div class="digit">'+(0==h%3?"<span>"+(0==h?c:h)+"</span>":h)+"</div>";a.append(e);a.circalise({targets:"div.digit",rotateTargets:b.rotateHours})}if(b.withUnits){c=12;e="";for(h=0;h<c;h++)e+='<div class="unit"></div>';a.append(e);c=parseInt(d.width(),10)/2-parseInt(a.find("div.unit").eq(0).outerHeight(),10)/2;d=parseInt(d.height(),10)/2-parseInt(a.find("div.unit").eq(0).outerHeight(),
10)/2;a.circalise({targets:".unit",rotateTargets:!0,xRadius:c,yRadius:d})}c=50;d="";for(h=0;h<c;h++)d+='<div class="side"></div>';f('<div id="clockBorder"/>').append(d).appendTo(a.parent()).circalise({targets:".side",rotate3d:!0,startAngle:0,xRadius:j,yRadius:j});var n=function(){var a=new Date,d=a.getSeconds(),c=a.getMinutes(),e=a.getHours();l.css({transform:"rotate("+6*d+"deg)"});m.css({transform:"rotate("+6*c+"deg)"});k.css({transform:"rotate("+(30*e+c/2)+"deg)"});b.withDate&&g.html(a.toString().split(a.getFullYear())[0]);
b.withDigitalTime&&p.html(a.toString().split(a.getFullYear())[1].split(" ")[1]);setTimeout(n,300)};n();return a})}})}(window.jQuery);